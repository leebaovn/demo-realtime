[{"D:\\BAO\\demo-realtime\\src\\index.js":"1","D:\\BAO\\demo-realtime\\src\\firebase\\index.js":"2","D:\\BAO\\demo-realtime\\src\\components\\ColumnChart\\index.js":"3","D:\\BAO\\demo-realtime\\src\\components\\Auth\\signin.js":"4","D:\\BAO\\demo-realtime\\src\\components\\Layout\\header.js":"5","D:\\BAO\\demo-realtime\\src\\components\\Auth\\login.js":"6","D:\\BAO\\demo-realtime\\src\\apis\\index.js":"7","D:\\BAO\\demo-realtime\\src\\components\\Room\\index.js":"8","D:\\BAO\\demo-realtime\\src\\components\\Modal\\create_room.js":"9","D:\\BAO\\demo-realtime\\src\\pages\\Room\\room-detail.js":"10","D:\\BAO\\demo-realtime\\src\\components\\Modal\\create_question.js":"11","D:\\BAO\\demo-realtime\\src\\pages\\Guest\\index.js":"12","D:\\BAO\\demo-realtime\\src\\App.js":"13","D:\\BAO\\demo-realtime\\src\\components\\Auth\\guest_login.js":"14","D:\\BAO\\demo-realtime\\src\\utils\\index.js":"15","D:\\BAO\\demo-realtime\\src\\components\\EditableCell\\index.js":"16","D:\\BAO\\demo-realtime\\src\\components\\Layout\\index.js":"17","D:\\BAO\\demo-realtime\\src\\contexts\\guest\\guest-context.js":"18","D:\\BAO\\demo-realtime\\src\\contexts\\room\\room-context.js":"19","D:\\BAO\\demo-realtime\\src\\components\\Notification\\index.js":"20","D:\\BAO\\demo-realtime\\src\\pages\\Room\\index.js":"21"},{"size":442,"mtime":1606707811792,"results":"22","hashOfConfig":"23"},{"size":655,"mtime":1606796422827,"results":"24","hashOfConfig":"23"},{"size":1021,"mtime":1607328558789,"results":"25","hashOfConfig":"23"},{"size":2958,"mtime":1607325117279,"results":"26","hashOfConfig":"23"},{"size":1314,"mtime":1607393140588,"results":"27","hashOfConfig":"23"},{"size":2408,"mtime":1607396803099,"results":"28","hashOfConfig":"23"},{"size":1251,"mtime":1607395587113,"results":"29","hashOfConfig":"23"},{"size":6960,"mtime":1607395088357,"results":"30","hashOfConfig":"23"},{"size":1603,"mtime":1607392891278,"results":"31","hashOfConfig":"23"},{"size":9957,"mtime":1607397054500,"results":"32","hashOfConfig":"23"},{"size":3594,"mtime":1607396634594,"results":"33","hashOfConfig":"23"},{"size":6121,"mtime":1607395367200,"results":"34","hashOfConfig":"23"},{"size":1412,"mtime":1606977434067,"results":"35","hashOfConfig":"23"},{"size":2246,"mtime":1607325866269,"results":"36","hashOfConfig":"23"},{"size":1136,"mtime":1607315776196,"results":"37","hashOfConfig":"23"},{"size":717,"mtime":1606722907392,"results":"38","hashOfConfig":"23"},{"size":253,"mtime":1607329085972,"results":"39","hashOfConfig":"23"},{"size":1305,"mtime":1606976380158,"results":"40","hashOfConfig":"23"},{"size":748,"mtime":1607335149387,"results":"41","hashOfConfig":"23"},{"size":660,"mtime":1607325646464,"results":"42","hashOfConfig":"23"},{"size":141,"mtime":1606719645959,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},"nho8wy",{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"46"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"46"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"46"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"90"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},"D:\\BAO\\demo-realtime\\src\\index.js",[],["95","96"],"D:\\BAO\\demo-realtime\\src\\firebase\\index.js",[],"D:\\BAO\\demo-realtime\\src\\components\\ColumnChart\\index.js",[],["97","98"],"D:\\BAO\\demo-realtime\\src\\components\\Auth\\signin.js",[],"D:\\BAO\\demo-realtime\\src\\components\\Layout\\header.js",["99","100"],"import React, { useEffect, useState } from 'react'\r\nimport './layout.style.css'\r\nimport firebase from './../../firebase'\r\nimport { LogoutOutlined } from '@ant-design/icons'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Button } from 'antd'\r\nfunction Header() {\r\n  const history = useHistory()\r\n  const [username, setUsername] = useState('')\r\n  const [photoUrl, setPhotoUrl] = useState('')\r\n  useEffect(() => {\r\n    firebase.auth().onAuthStateChanged(function (user) {\r\n      if (user) {\r\n        setPhotoUrl(user.photoURL)\r\n        setUsername(user.displayName)\r\n      } else {\r\n        history.push('/login')\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const logout = () => {\r\n    firebase.auth().signOut()\r\n  }\r\n  return (\r\n    <div className='container-header'>\r\n      <div className='wrapper'>\r\n        <div className='username'>\r\n          {photoUrl && <img src={photoUrl} className='avatar' />} {username}\r\n        </div>\r\n        <div className='logout' onClick={logout}>\r\n          <Button\r\n            style={{ color: 'red', textTransform: 'uppercase' }}\r\n            type='dashed'\r\n            danger\r\n          >\r\n            ログアウト\r\n            <LogoutOutlined style={{ marginLeft: '0.5rem' }} />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","D:\\BAO\\demo-realtime\\src\\components\\Auth\\login.js",[],"D:\\BAO\\demo-realtime\\src\\apis\\index.js",[],["101","102"],"D:\\BAO\\demo-realtime\\src\\components\\Room\\index.js",["103"],"D:\\BAO\\demo-realtime\\src\\components\\Modal\\create_room.js",[],"D:\\BAO\\demo-realtime\\src\\pages\\Room\\room-detail.js",["104","105","106"],"import React, { useEffect, useState, useContext } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { Table, Form, Button, Modal, Tooltip, Popconfirm } from 'antd'\r\nimport EditableCell from './../../components/EditableCell'\r\nimport firebase, { firestore } from './../../firebase'\r\nimport axios from './../../apis'\r\nimport ModalCreate from './../../components/Modal/create_question'\r\nimport {\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  SaveOutlined,\r\n  CloseOutlined,\r\n  PlusOutlined,\r\n  ArrowLeftOutlined,\r\n  QrcodeOutlined,\r\n  QuestionCircleOutlined,\r\n} from '@ant-design/icons'\r\nimport QRCode from 'qrcode.react'\r\nimport roomContext from './../../contexts/room/room-context'\r\nimport notification, { typeNotificaton } from './../../components/Notification'\r\nimport tinyUrl from 'tinyurl'\r\nimport './room.style.css'\r\nfunction RoomDetail() {\r\n  const { id } = useParams()\r\n  const [form] = Form.useForm()\r\n  const [{ room }, roomDispatch] = useContext(roomContext)\r\n  const roomRef = firestore.collection('room')\r\n  const roomTitle = room?.title\r\n  //define state section\r\n  const [questions, setQuestions] = useState([])\r\n  const [editingKey, setEditingKey] = useState('')\r\n  const [visible, setVisible] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n  const [currentShow, setCurrentShow] = useState('')\r\n  const isEditing = (record) => record.id === editingKey\r\n  const fetchQuestions = async () => {\r\n    setLoading(true)\r\n    const question = await axios.get(`/question/${id}`)\r\n    setQuestions(question.data)\r\n    setLoading(false)\r\n  }\r\n  const createQuestion = async (questionData) => {\r\n    setLoading(true)\r\n    try {\r\n      if (questionData) {\r\n        const newQuestion = await axios.post(\r\n          `/question/create/${id}`,\r\n          questionData\r\n        )\r\n        setQuestions((pre) => [...pre, newQuestion.data])\r\n        notification(typeNotificaton.success, 'Question created')\r\n      }\r\n    } catch (err) {\r\n      notification(typeNotificaton.error, 'Error occurs')\r\n    }\r\n\r\n    setLoading(false)\r\n  }\r\n  const deleteQuestion = async (id) => {\r\n    try {\r\n      await axios.delete(`/question/${id}`)\r\n      const newData = [...questions]\r\n      const index = newData.findIndex((item) => id === item.id)\r\n      if (index > -1) {\r\n        newData.splice(index, 1)\r\n        setQuestions(newData)\r\n      } else {\r\n        setQuestions(newData)\r\n      }\r\n      notification(typeNotificaton.success, 'Question deleted')\r\n    } catch (err) {\r\n      notification(typeNotificaton.error, 'Error occurs')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      if (user) {\r\n        fetchQuestions()\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const listenForActiveUser = async () => {\r\n    // if (!!currentUserId) {\r\n    roomRef.doc(id).onSnapshot((snapshot) => {\r\n      const roomSnapshot = Object.assign({}, snapshot.data(), {\r\n        id: snapshot.id,\r\n      })\r\n      if (roomSnapshot) {\r\n        roomDispatch({ type: 'MODIFIED', payload: { data: roomSnapshot } })\r\n      }\r\n    })\r\n    // }\r\n  }\r\n\r\n  useEffect(() => {\r\n    listenForActiveUser()\r\n  }, [])\r\n\r\n  const edit = (record) => {\r\n    form.setFieldsValue({\r\n      question: '',\r\n      correctAns: '',\r\n      answerA: '',\r\n      responseTime: '',\r\n      answerB: '',\r\n      answerC: '',\r\n      answerD: '',\r\n      ...record,\r\n    })\r\n    setEditingKey(record.id)\r\n  }\r\n  const cancel = () => {\r\n    setEditingKey('')\r\n  }\r\n\r\n  const show = async (id) => {\r\n    try {\r\n      await axios.post(`/question/${id}`)\r\n      notification(typeNotificaton.success, 'Question showed')\r\n    } catch (err) {\r\n      notification(typeNotificaton.error, 'Error occurs')\r\n    }\r\n  }\r\n\r\n  const save = async (id) => {\r\n    try {\r\n      const row = await form.validateFields()\r\n      await axios.patch(`/question/${id}`, row)\r\n      const newData = [...questions]\r\n      const index = newData.findIndex((item) => id === item.id)\r\n      if (index > -1) {\r\n        const item = newData[index]\r\n        newData.splice(index, 1, {\r\n          ...item,\r\n          ...row,\r\n        })\r\n        setQuestions(newData)\r\n        setEditingKey('')\r\n      } else {\r\n        newData.push(row)\r\n        setQuestions(newData)\r\n        setEditingKey('')\r\n      }\r\n      notification(typeNotificaton.success, 'Question editted')\r\n    } catch (errInfo) {\r\n      notification(typeNotificaton.error, 'Error occurs')\r\n    }\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: '質問',\r\n      dataIndex: 'question',\r\n      editable: true,\r\n      width: '14vw',\r\n    },\r\n\r\n    {\r\n      title: '期限',\r\n      dataIndex: 'responseTime',\r\n      editable: true,\r\n      width: '10vw',\r\n\r\n      render: (time) => {\r\n        return `${time}s`\r\n      },\r\n    },\r\n    {\r\n      title: 'A',\r\n      dataIndex: 'answerA',\r\n      editable: true,\r\n      width: '14vw',\r\n    },\r\n    {\r\n      title: 'B',\r\n      dataIndex: 'answerB',\r\n      width: '14vw',\r\n      editable: true,\r\n    },\r\n    {\r\n      title: 'C',\r\n      dataIndex: 'answerC',\r\n      width: '14vw',\r\n      editable: true,\r\n    },\r\n    {\r\n      title: 'D',\r\n      dataIndex: 'answerD',\r\n      width: '14vw',\r\n      editable: true,\r\n    },\r\n\r\n    {\r\n      title: '行動',\r\n      width: '20vw',\r\n\r\n      render: (_, record) => {\r\n        const editable = isEditing(record)\r\n        return editable ? (\r\n          <>\r\n            <Tooltip placement='top' title={'キャンセル'}>\r\n              <Button\r\n                style={{ marginRight: '1rem' }}\r\n                onClick={cancel}\r\n                size='small'\r\n              >\r\n                <CloseOutlined />\r\n              </Button>\r\n            </Tooltip>\r\n            <Tooltip placement='top' title={'OK'}>\r\n              <Button\r\n                type='primary'\r\n                onClick={() => save(record.id)}\r\n                size='small'\r\n              >\r\n                <SaveOutlined />\r\n              </Button>\r\n            </Tooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Tooltip placement='top' title={'編集'}>\r\n              <Button\r\n                style={{ marginRight: '1rem' }}\r\n                onClick={() => edit(record)}\r\n                size='small'\r\n              >\r\n                <EditOutlined />\r\n              </Button>\r\n            </Tooltip>\r\n            <Popconfirm\r\n              title='Wanna delete this question?'\r\n              cancelText='キャンセル'\r\n              icon={<QuestionCircleOutlined style={{ color: 'red' }} />}\r\n              onConfirm={() => deleteQuestion(record.id)}\r\n            >\r\n              <Tooltip placement='top' title={'削除'}>\r\n                <Button style={{ marginRight: '1rem' }} danger size='small'>\r\n                  <DeleteOutlined />\r\n                </Button>\r\n              </Tooltip>\r\n            </Popconfirm>\r\n            <Tooltip placement='top' title={'アンケートを始める'}>\r\n              <Button\r\n                type='primary'\r\n                size='small'\r\n                disabled={record.id === currentShow}\r\n                onClick={() => {\r\n                  setCurrentShow(record.id)\r\n                  show(record.id)\r\n                }}\r\n              >\r\n                Show\r\n              </Button>\r\n            </Tooltip>\r\n          </>\r\n        )\r\n      },\r\n    },\r\n  ]\r\n\r\n  const mergedColumns = columns.map((col) => {\r\n    if (!col.editable) {\r\n      return col\r\n    }\r\n    return {\r\n      ...col,\r\n      onCell: (record) => ({\r\n        record,\r\n        inputType: col.dataIndex === 'responseTime' ? 'number' : 'text',\r\n        dataIndex: col.dataIndex,\r\n        title: col.title,\r\n        editing: isEditing(record),\r\n      }),\r\n    }\r\n  })\r\n\r\n  const exportQRCode = async () => {\r\n    const newUrl = await tinyUrl.shorten(\r\n      `https://realtime-demo-chart.web.app/roomplay/${id}/login`\r\n    )\r\n    Modal.info({\r\n      title: <p>{roomTitle}</p>,\r\n      centered: true,\r\n\r\n      content: (\r\n        <>\r\n          <QRCode level='H' size={256} value={newUrl} />\r\n          <a href={newUrl} target='_blank'>\r\n            {newUrl}\r\n          </a>\r\n        </>\r\n      ),\r\n      onOk() {},\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='wrapper'>\r\n      <div>\r\n        <div className='room-info'>\r\n          <Button\r\n            style={{ marginRight: 'auto', textTransform: 'uppercase' }}\r\n            type='dashed'\r\n          >\r\n            {room?.title}\r\n          </Button>\r\n          <Button onClick={exportQRCode} style={{ marginRight: '1rem' }}>\r\n            <QrcodeOutlined />\r\n            Export QRCode\r\n          </Button>\r\n          <Button onClick={() => setVisible(true)} type='primary'>\r\n            <PlusOutlined />\r\n            質問の追加\r\n          </Button>\r\n        </div>\r\n        <div className='user-count'>\r\n          <span>{room?.members.length}</span>\r\n          ユーザがアンケートに参加しています。\r\n        </div>\r\n        <Form form={form} component={false}>\r\n          <Table\r\n            components={{\r\n              body: {\r\n                cell: EditableCell,\r\n              },\r\n            }}\r\n            dataSource={questions}\r\n            columns={mergedColumns}\r\n            loading={loading}\r\n            pagination={{\r\n              pageSize: 6,\r\n              hideOnSinglePage: true,\r\n              simple: true,\r\n            }}\r\n            rowKey='id'\r\n          />\r\n        </Form>\r\n        <div style={{ width: '100%', textAlign: 'right' }}>\r\n          <Button\r\n            style={{ margin: '1rem 0', textTransform: 'uppercase' }}\r\n            type='dashed'\r\n            danger\r\n          >\r\n            <Link to='/'>\r\n              <ArrowLeftOutlined />\r\n              戻る\r\n            </Link>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <ModalCreate\r\n        visible={visible}\r\n        setVisible={setVisible}\r\n        createQuestion={createQuestion}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomDetail\r\n","D:\\BAO\\demo-realtime\\src\\components\\Modal\\create_question.js",[],["107","108"],"D:\\BAO\\demo-realtime\\src\\pages\\Guest\\index.js",["109","110","111","112","113"],"import React, { useEffect, useState, useContext, useCallback } from 'react'\r\nimport './guest.style.css'\r\nimport { useParams, useHistory } from 'react-router-dom'\r\nimport { firestore } from './../../firebase'\r\nimport ColumnChart from './../../components/ColumnChart'\r\nimport {\r\n  pairData,\r\n  LIST_ANSWERS,\r\n  ANSWER_COLORS,\r\n  configConfetti,\r\n  countAns,\r\n} from './../../utils'\r\nimport guestContext from './../../contexts/guest/guest-context'\r\nimport axios from './../../apis'\r\nimport Confetti from 'react-dom-confetti'\r\nimport { Button } from 'antd'\r\nimport Confetti2 from 'react-confetti'\r\nimport notification, { typeNotificaton } from './../../components/Notification'\r\nfunction Guest() {\r\n  const { roomId } = useParams()\r\n  const history = useHistory()\r\n  const questionRef = firestore.collection('questions')\r\n  const answerRef = firestore.collection('answer')\r\n  const [{ displayName }, guestDispatch] = useContext(guestContext)\r\n  const [data, setData] = useState({})\r\n  const [currentQuestion, setcurrentQuestion] = useState({})\r\n  const [answerList, setAnswerList] = useState([])\r\n  const [timing, setTiming] = useState(Number)\r\n  const [loading, setLoading] = useState(false)\r\n  const [currentAns, setCurrentAns] = useState('')\r\n  const clearData = () => {\r\n    setData([])\r\n  }\r\n  if (!window.localStorage.getItem('guestId')) {\r\n    history.push(`/roomplay/${roomId}/login`)\r\n  }\r\n\r\n  const handleAns = async (ans) => {\r\n    if (timing <= 0) {\r\n      notification(typeNotificaton.error, 'Timeout')\r\n      return\r\n    }\r\n    if (currentAns) return\r\n    try {\r\n      setCurrentAns(ans)\r\n      await axios.post(`/answer/${currentQuestion.id}`, {\r\n        answer: ans,\r\n      })\r\n    } catch (err) {\r\n      notification(typeNotificaton.error, 'Error occurs')\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    listenForShowQuestion()\r\n  }, [])\r\n\r\n  const listenForVoting = useCallback(async () => {\r\n    if (currentQuestion.id) {\r\n      answerRef.where('questionId', '==', currentQuestion.id || '').onSnapshot(\r\n        (snapshot) => {\r\n          // if (timing < 6) return\r\n          snapshot.docChanges().forEach(async (change) => {\r\n            if (change.doc.data().questionId === currentQuestion['id']) {\r\n              if (change.type === 'added') {\r\n                const docAns = await answerRef\r\n                  .where('questionId', '==', currentQuestion.id || '')\r\n                  .get()\r\n                const arrAns = docAns.docs.map((ans) => {\r\n                  return ans.data().answer\r\n                })\r\n                const resultArr = pairData(arrAns)\r\n                setData(resultArr)\r\n              }\r\n            }\r\n          })\r\n        },\r\n        (err) => console.log(err)\r\n      )\r\n    }\r\n  }, [currentQuestion.id])\r\n  const listenForShowQuestion = useCallback(async () => {\r\n    questionRef.where('roomId', '==', roomId).onSnapshot((snapshot) => {\r\n      snapshot.docChanges().forEach((change) => {\r\n        if (change.type === 'modified') {\r\n          if (change.doc.data().roomId === roomId) {\r\n            const {\r\n              question,\r\n              answerA,\r\n              answerB,\r\n              answerC,\r\n              answerD,\r\n              responseTime,\r\n            } = change.doc.data()\r\n            if (question) {\r\n              setTiming(responseTime)\r\n              setcurrentQuestion({\r\n                question: question,\r\n                id: change.doc.id,\r\n              })\r\n              setData([])\r\n              setCurrentAns('')\r\n              setAnswerList([answerA, answerB, answerC, answerD])\r\n            }\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [questionRef])\r\n\r\n  useEffect(() => {\r\n    listenForVoting()\r\n  }, [currentQuestion])\r\n\r\n  useEffect(() => {\r\n    // if (timing < 6) {\r\n    //   clearData()\r\n    // }\r\n    const timingCount = setInterval(() => {\r\n      setTiming((pre) => pre - 1)\r\n    }, 1000)\r\n    if (timing === 0) {\r\n      clearInterval(timingCount)\r\n      setLoading(true)\r\n      setTimeout(() => {\r\n        setLoading(false)\r\n      }, 2000)\r\n    }\r\n    return () => clearInterval(timingCount)\r\n  }, [timing])\r\n\r\n  const logout = () => {\r\n    guestDispatch({ type: 'LOGOUT' })\r\n    history.push(`/roomplay/${roomId}/login`)\r\n  }\r\n  return (\r\n    <div className='mobile-wrapper'>\r\n      <Confetti2 numberOfPieces={400} recycle={loading} friction={1} />\r\n      <div className='mobile-header'>\r\n        <div className='display-name'>{displayName}</div>\r\n        <div className='logout'>\r\n          <Button onClick={logout}>ログアウト</Button>\r\n        </div>\r\n      </div>\r\n      <div className='chart'>\r\n        <ColumnChart data={data} label={LIST_ANSWERS} />\r\n      </div>\r\n      {!timing && <div className='message'>Please wait the host</div>}\r\n      <div className='response-time-section'>\r\n        {currentQuestion.id && (\r\n          <div\r\n            className='response-time'\r\n            style={\r\n              timing <= 5\r\n                ? { backgroundColor: '#cc4747' }\r\n                : { backgroundColor: '#03994c' }\r\n            }\r\n          >\r\n            {timing}\r\n          </div>\r\n        )}\r\n        <div className='image'></div>\r\n\r\n        <div className='ans-count'>\r\n          <div className='count'>{countAns(data)}</div>\r\n          <div>answers</div>\r\n        </div>\r\n      </div>\r\n\r\n      {currentQuestion.id && (\r\n        <div className='question'>Question: {currentQuestion.question}</div>\r\n      )}\r\n      <div className='answer-section'>\r\n        <ul className='ans-list'>\r\n          {answerList.map((ans, idx) => (\r\n            <li\r\n              key={idx}\r\n              className='ans-item'\r\n              style={{ backgroundColor: ANSWER_COLORS[idx] }}\r\n              onClick={() => handleAns(LIST_ANSWERS[idx])}\r\n            >\r\n              {currentAns && LIST_ANSWERS[idx] !== currentAns && (\r\n                <div className='overlay'></div>\r\n              )}\r\n              <Confetti key={idx} active={currentAns} config={configConfetti} />\r\n              {LIST_ANSWERS[idx]}. {ans}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Guest\r\n","D:\\BAO\\demo-realtime\\src\\App.js",[],["114","115"],"D:\\BAO\\demo-realtime\\src\\components\\Auth\\guest_login.js",["116"],"D:\\BAO\\demo-realtime\\src\\utils\\index.js",[],"D:\\BAO\\demo-realtime\\src\\components\\EditableCell\\index.js",[],"D:\\BAO\\demo-realtime\\src\\components\\Layout\\index.js",[],"D:\\BAO\\demo-realtime\\src\\contexts\\guest\\guest-context.js",[],"D:\\BAO\\demo-realtime\\src\\contexts\\room\\room-context.js",[],["117","118"],"D:\\BAO\\demo-realtime\\src\\components\\Notification\\index.js",[],"D:\\BAO\\demo-realtime\\src\\pages\\Room\\index.js",[],{"ruleId":"119","replacedBy":"120"},{"ruleId":"121","replacedBy":"122"},{"ruleId":"119","replacedBy":"123"},{"ruleId":"121","replacedBy":"124"},{"ruleId":"125","severity":1,"message":"126","line":20,"column":6,"nodeType":"127","endLine":20,"endColumn":8,"suggestions":"128"},{"ruleId":"129","severity":1,"message":"130","line":29,"column":24,"nodeType":"131","endLine":29,"endColumn":65},{"ruleId":"119","replacedBy":"132"},{"ruleId":"121","replacedBy":"133"},{"ruleId":"134","severity":1,"message":"135","line":21,"column":10,"nodeType":"136","messageId":"137","endLine":21,"endColumn":19},{"ruleId":"125","severity":1,"message":"138","line":82,"column":6,"nodeType":"127","endLine":82,"endColumn":8,"suggestions":"139"},{"ruleId":"125","severity":1,"message":"140","line":99,"column":6,"nodeType":"127","endLine":99,"endColumn":8,"suggestions":"141"},{"ruleId":"142","severity":1,"message":"143","line":291,"column":28,"nodeType":"144","endLine":291,"endColumn":43},{"ruleId":"119","replacedBy":"145"},{"ruleId":"121","replacedBy":"146"},{"ruleId":"134","severity":1,"message":"147","line":31,"column":9,"nodeType":"136","messageId":"137","endLine":31,"endColumn":18},{"ruleId":"125","severity":1,"message":"148","line":55,"column":6,"nodeType":"127","endLine":55,"endColumn":8,"suggestions":"149"},{"ruleId":"125","severity":1,"message":"150","line":80,"column":6,"nodeType":"127","endLine":80,"endColumn":26,"suggestions":"151"},{"ruleId":"125","severity":1,"message":"152","line":108,"column":6,"nodeType":"127","endLine":108,"endColumn":19,"suggestions":"153"},{"ruleId":"125","severity":1,"message":"154","line":112,"column":6,"nodeType":"127","endLine":112,"endColumn":23,"suggestions":"155"},{"ruleId":"119","replacedBy":"156"},{"ruleId":"121","replacedBy":"157"},{"ruleId":"134","severity":1,"message":"158","line":10,"column":10,"nodeType":"136","messageId":"137","endLine":10,"endColumn":20},{"ruleId":"119","replacedBy":"159"},{"ruleId":"121","replacedBy":"160"},"no-native-reassign",["161"],"no-negated-in-lhs",["162"],["161"],["162"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["163"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["161"],["162"],"no-unused-vars","'roomState' is assigned a value but never used.","Identifier","unusedVar","React Hook useEffect has a missing dependency: 'fetchQuestions'. Either include it or remove the dependency array.",["164"],"React Hook useEffect has a missing dependency: 'listenForActiveUser'. Either include it or remove the dependency array.",["165"],"react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXAttribute",["161"],["162"],"'clearData' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'listenForShowQuestion'. Either include it or remove the dependency array.",["166"],"React Hook useCallback has missing dependencies: 'answerRef' and 'currentQuestion'. Either include them or remove the dependency array.",["167"],"React Hook useCallback has a missing dependency: 'roomId'. Either include it or remove the dependency array.",["168"],"React Hook useEffect has a missing dependency: 'listenForVoting'. Either include it or remove the dependency array.",["169"],["161"],["162"],"'guestState' is assigned a value but never used.",["161"],["162"],"no-global-assign","no-unsafe-negation",{"desc":"170","fix":"171"},{"desc":"172","fix":"173"},{"desc":"174","fix":"175"},{"desc":"176","fix":"177"},{"desc":"178","fix":"179"},{"desc":"180","fix":"181"},{"desc":"182","fix":"183"},"Update the dependencies array to be: [history]",{"range":"184","text":"185"},"Update the dependencies array to be: [fetchQuestions]",{"range":"186","text":"187"},"Update the dependencies array to be: [listenForActiveUser]",{"range":"188","text":"189"},"Update the dependencies array to be: [listenForShowQuestion]",{"range":"190","text":"191"},"Update the dependencies array to be: [answerRef, currentQuestion]",{"range":"192","text":"193"},"Update the dependencies array to be: [questionRef, roomId]",{"range":"194","text":"195"},"Update the dependencies array to be: [currentQuestion, listenForVoting]",{"range":"196","text":"197"},[644,646],"[history]",[2712,2714],"[fetchQuestions]",[3135,3137],"[listenForActiveUser]",[1837,1839],"[listenForShowQuestion]",[2724,2744],"[answerRef, currentQuestion]",[3618,3631],"[questionRef, roomId]",[3685,3702],"[currentQuestion, listenForVoting]"]